
{% extends "userBase.html" %}

{% block head %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block content %}

<body>



<div class="container-user">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="user-info">
            <div class="avatar-wrapper">
                <img src="{% static 'images/avatar.png' %}" class="avatar-img">
                <span class="avatar-camera"><i class="bi bi-camera-fill"></i></span>
            </div>
            <p class="username">{{ customer.full_name }}</p>
         <div class="profile-actions">
          <a href="{% url 'profile' %}" class="btn btn-outline">Chỉnh sửa thông tin</a>
        </div>

        </div>

        <nav class="menu">
            <ul>
               <li class="{% if active_section == 'profile' %}active{% endif %}">
    <a href="{% url 'profile' %}">Tài Khoản Của Tôi</a></li>
                <li data-section="repass-section"><div class="profile-actions">
                  <a href="{% url 'profile_password' %}" class="btn btn-outline">Đổi mật khẩu</a>
                </div>
                </li>
                <li data-section="orders-section"><a href="#">Đơn Mua</a></li>
                 <li data-section="addresses-section"><div class="profile-actions">
                    <a href="{% url 'profile_address' %}" class="btn btn-outline">Địa chỉ nhận hàng</a>
                </div>
                </li>
            </ul>
        </nav>

        <div class="logout-section">
            <a href="{% url 'logout' %}">
                <button id="logoutBtn">Đăng Xuất</button>
            </a>
        </div>
    </aside>

    <!-- Nội dung chính -->
    <main class="content">
        <!-- Hồ sơ -->
<section class="section {% if active_section == 'profile' %}active{% endif %}">
            <h2>Hồ Sơ Của Tôi</h2>
            <p class="desc">Quản lý thông tin hồ sơ để bảo mật tài khoản</p>

<form class="profile-form" method="post" action="{% url 'profile' %}">
    {% csrf_token %}
                <div class="form-group">
                    <label>Họ và tên</label>
                    <input type="text" value="{{ customer.full_name }}">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" value="{{ customer.email }}" readonly>
                </div>
                <div class="form-group">
                    <label>Số điện thoại</label>
                    <input type="tel" value="{{ customer.phone }}">
                </div>
               <div class="form-group">
                  <label>Ngày sinh</label>
                  <input type="date" name="date_of_birth" value="{{ customer.date_of_birth|date:'Y-m-d' }}">
                </div>

                <div class="form-group">
                    <label>Giới tính</label>
                    <select>
                        <option {% if customer.gender == 'Nam' %}selected{% endif %}>Nam</option>
                        <option {% if customer.gender == 'Nữ' %}selected{% endif %}>Nữ</option>
                        <option {% if customer.gender == 'Khác' %}selected{% endif %}>Khác</option>
                    </select>
                </div>
                <button class="save-btn" type="submit">Lưu</button>
            </form>
        </section>

        <!-- Đổi mật khẩu -->
<section class="section {% if active_section == 'password' %}active{% endif %}">
            <h2>Đổi Mật Khẩu</h2>
            <form method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label>Mật khẩu hiện tại</label>
                    <input type="password" name="currentPassword" required>
                </div>
                <div class="form-group">
                    <label>Mật khẩu mới</label>
                    <input type="password" name="newPassword" required>
                </div>
                <div class="form-group">
                    <label>Nhập lại mật khẩu mới</label>
                    <input type="password" name="confirmPassword" required>
                </div>
                <button class="save-btn" type="submit">Xác nhận</button>
            </form>
        </section>

        <!-- Đơn mua -->
        <section id="orders-section" class="section">
            <h2>Đơn Mua</h2>
            <p>Bạn đã đặt <strong>{{ order_count }}</strong> đơn hàng.</p>
            <!-- Có thể thêm bảng danh sách đơn hàng -->
        </section>

        <!-- Địa chỉ -->
<section class="section {% if active_section == 'address' %}active{% endif %}">
    <h2>Thêm Địa Chỉ</h2>
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label>Người nhận</label>
            <input type="text" name="recipient_name" required>
        </div>
        <div class="form-group">
            <label>Số điện thoại</label>
            <input type="text" name="phone" required>
        </div>
        <div class="form-group">
            <label>Địa chỉ</label>
            <input type="text" name="address_line" required>
        </div>
        <div class="form-group">
            <label>Phường/Xã</label>
            <input type="text" name="ward">
        </div>
        <div class="form-group">
            <label>Quận/Huyện</label>
            <input type="text" name="district">
        </div>
        <div class="form-group">
            <label>Thành phố</label>
            <input type="text" name="city">
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="is_default" id="defaultCheck">
          <label class="form-check-label" for="defaultCheck">
            Mặc định
          </label>
        </div>

        <button class="save-btn" type="submit">Xác nhận</button>
    </form>
</section>
    </main>
</div>

{% endblock %}

